!function(){"use strict";angular.module("starter.controllers",[]),angular.module("starter",["ionic","starter.controllers"])}(),function(){"use strict";function e(e,t,n,o){var r=o.connPub.subscribe(function(t){e.$evalAsync(function(){e.CONNECTED=t})});n.get("tutorialDone")||(n.set("tutorialDone",!0),t.go("app.about_tutorial")),e.$on("$destroy",function(){r.dispose()})}angular.module("starter.controllers").controller("AppCtrl",["$scope","$state","storage","socket",e])}(),function(){"use strict";function e(e,t,n,o,r){function a(){t.nextViewOptions({disableBack:!0}),n.go("app.im")}e.model={roomName:"",userName:""},e.submit=function(){e.model.loading=!0,r.join(e.model).then(function(){a()},function(e){o.alert({title:"Warning",template:e})}).then(function(){e.$evalAsync(function(){e.model.loading=!1})})}}angular.module("starter.controllers").controller("LandingCtrl",["$scope","$ionicHistory","$state","$ionicPopup","roomIO",e])}(),function(){"use strict";function e(e){e.ready(function(){window.cordova&&window.cordova.plugins.Keyboard&&(cordova.plugins.Keyboard.hideKeyboardAccessoryBar(!0),cordova.plugins.Keyboard.disableScroll(!0))})}angular.module("starter").run(["$ionicPlatform",e])}(),function(){"use strict";function e(e){e.ready(function(){window.StatusBar&&StatusBar.styleDefault()})}angular.module("starter").run(["$ionicPlatform",e])}(),function(){"use strict";function e(e,t,n){e.$on("$stateChangeStart",function(e,o){"app.landing"===o.name&&n.isJoined()&&(e.preventDefault(),t.go("app.im")),"app.im"!==o.name||n.isJoined()||(e.preventDefault(),t.go("app.landing"))})}angular.module("starter").run(["$rootScope","$state","roomIO",e])}(),function(){"use strict";function e(e,t){e.state("app",{url:"/app",abstract:!0,templateUrl:"templates/menu.html",controller:"AppCtrl"}).state("app.landing",{url:"/landing",cache:!1,views:{menuContent:{templateUrl:"templates/landing.html",controller:"LandingCtrl"}}}),e.state("app.im",{url:"/@",views:{menuContent:{templateUrl:"templates/im.html",controller:"ImCtrl"}}}),e.state("app.rc4",{url:"/rc4",views:{menuContent:{templateUrl:"templates/rc4.html",controller:"Rc4Ctrl"}}}).state("app.aes",{url:"/aes",views:{menuContent:{templateUrl:"templates/aes.html",controller:"AesCtrl"}}}).state("app.pgp",{url:"/pgp",cache:!1,views:{menuContent:{templateUrl:"templates/pgp.html",controller:"PgpCtrl"}}}).state("app.pgp_generate",{url:"/pgp/generate",views:{menuContent:{templateUrl:"templates/pgp_generate.html",controller:"PgpGenerateCtrl"}}}).state("app.pgp_my_private",{url:"/pgp/my-private",cache:!1,views:{menuContent:{templateUrl:"templates/pgp_my_private.html",controller:"PgpMyPrivateCtrl"}}}).state("app.pgp_my_public",{url:"/pgp/my-public",cache:!1,views:{menuContent:{templateUrl:"templates/pgp_my_public.html",controller:"PgpMyPublicCtrl"}}}).state("app.pgp_buddy_public",{url:"/pgp/buddy-public",cache:!1,views:{menuContent:{templateUrl:"templates/pgp_buddy_public.html",controller:"PgpBuddyPublicCtrl"}}}),e.state("app.android",{url:"/android",views:{menuContent:{templateUrl:"templates/android.html"}}}),e.state("app.about",{url:"/about",views:{menuContent:{templateUrl:"templates/about.html"}}}).state("app.about_license",{url:"/about/license",views:{menuContent:{templateUrl:"templates/about_license.html"}}}).state("app.about_feedback",{url:"/about/feedback",cache:!1,views:{menuContent:{templateUrl:"templates/about_feedback.html",controller:"AboutFeedbackCtrl"}}}).state("app.about_vendors",{url:"/about/vendors",views:{menuContent:{templateUrl:"templates/about_vendors.html"}}}).state("app.about_security",{url:"/about/security",views:{menuContent:{templateUrl:"templates/about_security.html"}}}).state("app.about_tutorial",{url:"/about/tutorial",cache:!1,views:{menuContent:{templateUrl:"templates/about_tutorial.html",controller:"AboutTutorialCtrl"}}}),t.otherwise("/app/landing")}angular.module("starter").config(["$stateProvider","$urlRouterProvider",e])}(),function(){"use strict";toastr.options={closeButton:!1,debug:!1,newestOnTop:!0,progressBar:!1,positionClass:"toast-bottom-center",preventDuplicates:!0,onclick:null,showDuration:"100",hideDuration:"1000",timeOut:"2000",extendedTimeOut:"1000",showEasing:"swing",hideEasing:"linear",showMethod:"fadeIn",hideMethod:"fadeOut"}}(),function(){"use strict";function e(){return{restrict:"A",link:function(e,t,n){var o=$(t);o.on("click",function(){window.open(n.externalLink,"_system")}),e.$on("$destroy",function(){o.off()})}}}angular.module("starter").directive("externalLink",[e])}(),function(){"use strict";function e(){function e(){var e=document.location.href.startsWith("file:"),t=$("body").hasClass("platform-webview");return e&&!t}return{isLocalhost:e}}angular.module("starter").factory("host",[e])}(),function(){"use strict";function e(e,t){function n(t){var n=t.roomName,o=t.userName;e.set("roomName",n),e.set("userName",o)}function o(){return{roomName:e.get("roomName"),userName:e.get("userName")}}function r(){var e=o(),t=e.roomName,n=e.userName;return t&&n}function a(e){var o=e.roomName,r=e.userName;return new Promise(function(e,a){t.emit("room:join",{roomName:o,userName:r},function(t,s){s?a(s):(n({roomName:o,userName:r}),e())})})}function s(){return new Promise(function(e){t.emit("room:leave",function(){n({}),e()})})}return{join:a,leave:s,isJoined:r}}angular.module("starter").factory("roomIO",["settings","socket",e])}(),function(){"use strict";function e(){function e(e){return o[e]}function t(e,t){return o[e]=t,r.onNext({key:e,value:t}),t}function n(e){delete o[e],r.onNext({key:e,value:void 0})}var o={},r=new Rx.Subject;return{get:e,set:t,del:n,observer:r}}angular.module("starter").factory("settings",[e])}(),function(){"use strict";function e(e){var t=e.isLocalhost()?"http://localhost:5000":"https://silenceim.com",n=io.connect(t,{transports:["websocket"],path:"/socket-endpoint"}),o=new Rx.BehaviorSubject((!1));return n.on("connect",function(){o.onNext(!0)}),n.on("disconnect",function(){o.onNext(!1)}),{connPub:o,on:function(){n.on.apply(n,arguments)},emit:function(){n.emit.apply(n,arguments)}}}angular.module("starter").factory("socket",["host",e])}(),function(){"use strict";function e(){function e(e){return localStorage.getItem(e)}function t(e,t){return localStorage.setItem(e,t)}function n(e){return localStorage.removeItem(e)}return{get:e,set:t,del:n}}angular.module("starter").factory("storage",[e])}(),function(){"use strict";function e(){function e(e){return("string"!==$.type(e)||!/^\s+$/.test(e))&&!$.isEmptyObject(e)}function t(t){return e(t)?t:void 0}return{isPresent:e,presence:t}}angular.module("starter").factory("utils",[e])}(),function(){"use strict";function e(e,t,n,o,r,a){var s={device:r.presence(ionic.Platform.device()),platform:ionic.Platform.platform(),version:ionic.Platform.version()};e.model={},e.submit=function(){e.model.loading=!0,a.emit("feedback:send",$.extend(e.model,s),function(r,a){e.model.loading=!1,a?o.alert({title:"Warning",template:a}):(o.alert({title:"Success",template:"Feedback has been sent. We will answer you shortly."}),t.nextViewOptions({disableBack:!0}),n.go("app.about"))})}}angular.module("starter.controllers").controller("AboutFeedbackCtrl",["$scope","$ionicHistory","$state","$ionicPopup","utils","socket",e])}(),function(){"use strict";function e(e,t,n){var o=t.canDragContent();t.canDragContent(!1),e.isLastSlide=function(){return n.currentIndex()+1===n.slidesCount()},e.next=function(){n.next()},e.slide=function(e){n.slide(e)},e.$on("$destroy",function(){t.canDragContent(o)})}angular.module("starter.controllers").controller("AboutTutorialCtrl",["$scope","$ionicSideMenuDelegate","$ionicSlideBoxDelegate",e])}(),function(){"use strict";function e(e,t,n){function o(t){t?(n.set("aesPassphrase",e.model.passphrase),e.model.key=n.set("aesKey",t)):(n.del("aesPassphrase"),e.model.key=n.del("aesKey"))}e.model={bit:256,iterations:8192,passphrase:n.get("aesPassphrase"),key:n.get("aesKey")},e.submit=function(){t.isPresent(e.model.passphrase)?(o(enigma.misc.keygen.hex(e.model.passphrase,{iterations:e.model.iterations,length:e.model.bit})),toastr.success("AES key has been saved")):e.model.key?(o(),toastr.warning("AES key has been removed")):toastr.warning("Provide a passphrase")}}angular.module("starter.controllers").controller("AesCtrl",["$scope","utils","settings",e])}(),function(){"use strict";function e(e,t,n,o){e.leave=function(){o.leave().then(function(){t.nextViewOptions({disableBack:!0}),n.go("app.landing")})}}angular.module("starter.controllers").controller("ImCtrl",["$scope","$ionicHistory","$state","roomIO",e])}(),function(){"use strict";function e(e){return{restrict:"A",link:function(t,n){function o(){$.each(a,function(t,n){var o=$(n),r=!!e.get(o.attr("data-setting"));o.toggleClass("on",r)})}var r=$(n),a=r.find("ion-item[data-setting]");e.observer.subscribe(o),o()}}}angular.module("starter").directive("menuDirective",["settings",e])}(),function(){"use strict";function e(e,t,n,o){e.model={key:o.get("pgpBuddyPublicKey")},e.submit=function(){o.set("pgpBuddyPublicKey",e.model.key),toastr.success("Buddy's public key was saved"),t.nextViewOptions({disableBack:!0}),n.go("app.pgp")}}angular.module("starter.controllers").controller("PgpBuddyPublicCtrl",["$scope","$ionicHistory","$state","settings",e])}(),function(){"use strict";function e(e,t){e.myPrivateKey=!!t.get("pgpMyPrivateKey"),e.myPublicKey=!!t.get("pgpMyPublicKey"),e.buddyPublicKey=!!t.get("pgpBuddyPublicKey")}angular.module("starter.controllers").controller("PgpCtrl",["$scope","settings",e])}(),function(){"use strict";function e(e,n,o,r,a){e.generate=function(e){n.show({template:t});var s=openpgp.generateKey({numBits:e,userIds:[{name:"anonymous",email:"anonymous@example.com"}]});s.catch(function(e){n.hide().then(function(){toastr.error(e.toString())})}),s.then(function(e){a.set("pgpMyPublicKey",e.publicKeyArmored),a.set("pgpMyPrivateKey",e.privateKeyArmored),n.hide().then(function(){toastr.success("Keypair was saved"),o.nextViewOptions({disableBack:!0}),r.go("app.pgp_my_public")})})}}var t='\n<ion-spinner icon="dots" style="fill: #FFF; stroke: #FFF"></ion-spinner>\n';angular.module("starter.controllers").controller("PgpGenerateCtrl",["$scope","$ionicLoading","$ionicHistory","$state","settings",e])}(),function(){"use strict";function e(e,t,n,o){e.model={key:o.get("pgpMyPrivateKey")},e.submit=function(){o.set("pgpMyPrivateKey",e.model.key),toastr.success("My private key was saved"),t.nextViewOptions({disableBack:!0}),n.go("app.pgp")}}angular.module("starter.controllers").controller("PgpMyPrivateCtrl",["$scope","$ionicHistory","$state","settings",e])}(),function(){"use strict";function e(e,t,n,o){e.model={key:o.get("pgpMyPublicKey")},e.submit=function(){o.set("pgpMyPublicKey",e.model.key),toastr.success("My public key was saved"),t.nextViewOptions({disableBack:!0}),n.go("app.pgp")}}angular.module("starter.controllers").controller("PgpMyPublicCtrl",["$scope","$ionicHistory","$state","settings",e])}(),function(){"use strict";function e(e,t,n){function o(t){t?(n.set("rc4Passphrase",e.model.passphrase),e.model.key=n.set("rc4Key",t)):(n.del("rc4Passphrase"),e.model.key=n.del("rc4Key"))}e.model={bit:256,iterations:8192,passphrase:n.get("rc4Passphrase"),key:n.get("rc4Key")},e.submit=function(){t.isPresent(e.model.passphrase)?(o(enigma.misc.keygen.hex(e.model.passphrase,{iterations:e.model.iterations,length:e.model.bit})),toastr.success("RC4 key has been saved")):e.model.key?(o(),toastr.warning("RC4 key has been removed")):toastr.warning("Provide a passphrase")}}angular.module("starter.controllers").controller("Rc4Ctrl",["$scope","utils","settings",e])}();